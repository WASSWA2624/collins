{"version":3,"names":["_getJestObj","mock","useAuth","jest","fn","useI18n","useNetwork","useRouter","_interopRequireDefault","require","default","_asyncToGenerator2","_require3","React","TestRenderer","_require","_require2","useLoginScreen","act","renderHook","hook","result","renderer","HookHarness","hookResult","Object","assign","create","createElement","current","unmount","describe","login","Promise","resolve","clearError","push","t","key","beforeEach","clearAllMocks","mockReturnValue","isLoading","errorCode","isOffline","it","_renderHook","expect","email","toBe","password","tenantId","canSubmit","_renderHook2","handleChangeEmail","handleChangePassword","handleChangeTenantId","_renderHook3","handleSubmit","toHaveBeenCalled","toHaveBeenCalledWith","tenant_id","_renderHook4","errorMessage","_renderHook5","handleGoToRegister","handleGoToForgotPassword"],"sources":["useLoginScreen.test.js"],"sourcesContent":["/**\r\n * useLoginScreen Hook Tests\r\n * File: useLoginScreen.test.js\r\n */\r\nconst React = require('react');\r\nconst TestRenderer = require('react-test-renderer');\r\nconst { useAuth, useI18n, useNetwork } = require('@hooks');\r\nconst { useRouter } = require('expo-router');\r\n\r\nconst useLoginScreen = require('@platform/screens/auth/LoginScreen/useLoginScreen').default;\r\n\r\njest.mock('@hooks', () => ({\r\n  useAuth: jest.fn(),\r\n  useI18n: jest.fn(),\r\n  useNetwork: jest.fn(),\r\n}));\r\n\r\njest.mock('expo-router', () => ({\r\n  useRouter: jest.fn(),\r\n}));\r\n\r\nconst act = TestRenderer.act;\r\nconst renderHook = (hook) => {\r\n  const result = {};\r\n  let renderer;\r\n\r\n  const HookHarness = () => {\r\n    const hookResult = hook();\r\n    Object.assign(result, hookResult);\r\n    return null;\r\n  };\r\n\r\n  act(() => {\r\n    renderer = TestRenderer.create(React.createElement(HookHarness));\r\n  });\r\n\r\n  return {\r\n    result: { current: result },\r\n    unmount: () => {\r\n      act(() => {\r\n        renderer.unmount();\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\ndescribe('useLoginScreen Hook', () => {\r\n  const login = jest.fn(() => Promise.resolve({}));\r\n  const clearError = jest.fn();\r\n  const push = jest.fn();\r\n  const t = jest.fn((key) => {\r\n    if (key === 'errors.codes.UNKNOWN_ERROR') return 'Unknown error';\r\n    if (key === 'errors.codes.UNAUTHORIZED') return 'Unauthorized';\r\n    return key;\r\n  });\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    useAuth.mockReturnValue({\r\n      login,\r\n      clearError,\r\n      isLoading: false,\r\n      errorCode: null,\r\n    });\r\n    useI18n.mockReturnValue({ t });\r\n    useNetwork.mockReturnValue({ isOffline: false });\r\n    useRouter.mockReturnValue({ push });\r\n  });\r\n\r\n  it('returns initial state', () => {\r\n    const { result } = renderHook(() => useLoginScreen());\r\n    expect(result.current.email).toBe('');\r\n    expect(result.current.password).toBe('');\r\n    expect(result.current.tenantId).toBe('');\r\n    expect(result.current.canSubmit).toBe(false);\r\n  });\r\n\r\n  it('enables submit when required fields are set', () => {\r\n    const { result } = renderHook(() => useLoginScreen());\r\n    act(() => {\r\n      result.current.handleChangeEmail('user@example.com');\r\n      result.current.handleChangePassword('Pass123!');\r\n      result.current.handleChangeTenantId('tenant');\r\n    });\r\n    expect(result.current.canSubmit).toBe(true);\r\n  });\r\n\r\n  it('submits login payload', async () => {\r\n    const { result } = renderHook(() => useLoginScreen());\r\n    act(() => {\r\n      result.current.handleChangeEmail('user@example.com');\r\n      result.current.handleChangePassword('Pass123!');\r\n      result.current.handleChangeTenantId('tenant');\r\n    });\r\n    await act(async () => {\r\n      await result.current.handleSubmit();\r\n    });\r\n    expect(clearError).toHaveBeenCalled();\r\n    expect(login).toHaveBeenCalledWith({\r\n      email: 'user@example.com',\r\n      password: 'Pass123!',\r\n      tenant_id: 'tenant',\r\n    });\r\n  });\r\n\r\n  it('maps error codes to i18n messages', () => {\r\n    useAuth.mockReturnValue({\r\n      login,\r\n      clearError,\r\n      isLoading: false,\r\n      errorCode: 'UNAUTHORIZED',\r\n    });\r\n    const { result } = renderHook(() => useLoginScreen());\r\n    expect(result.current.errorMessage).toBe('Unauthorized');\r\n  });\r\n\r\n  it('handles navigation actions', () => {\r\n    const { result } = renderHook(() => useLoginScreen());\r\n    act(() => {\r\n      result.current.handleGoToRegister();\r\n      result.current.handleGoToForgotPassword();\r\n    });\r\n    expect(push).toHaveBeenCalledWith('/register');\r\n    expect(push).toHaveBeenCalledWith('/forgot-password');\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}