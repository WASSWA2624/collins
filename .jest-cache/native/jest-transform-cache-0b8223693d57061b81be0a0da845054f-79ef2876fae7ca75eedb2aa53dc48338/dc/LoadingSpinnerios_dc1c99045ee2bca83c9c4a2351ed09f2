f9fb951b62604a7948bc5f55149dc899
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _react = _interopRequireWildcard(require("react"));
var _reactNative = require("react-native");
var _native = require("styled-components/native");
var _LoadingSpinnerIos = require("./LoadingSpinner.ios.styles");
var _hooks = require("../../../../hooks");
var _types = require("./types");
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["size", "color", "accessibilityLabel", "accessibilityHint", "testID", "style"];
var LoadingSpinnerIOS = function LoadingSpinnerIOS(_ref) {
  var _ref$size = _ref.size,
    size = _ref$size === void 0 ? _types.SIZES.MEDIUM : _ref$size,
    color = _ref.color,
    accessibilityLabel = _ref.accessibilityLabel,
    accessibilityHint = _ref.accessibilityHint,
    testID = _ref.testID,
    style = _ref.style,
    rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  var _useI18n = (0, _hooks.useI18n)(),
    t = _useI18n.t;
  var theme = (0, _native.useTheme)();
  var defaultAccessibilityLabel = accessibilityLabel || t('common.loading');
  var safeSize = (0, _react.useMemo)(function () {
    var allowed = Object.values(_types.SIZES);
    return allowed.includes(size) ? size : _types.SIZES.MEDIUM;
  }, [size]);
  var getColor = function getColor() {
    if (color) return color;
    return theme.colors.primary;
  };
  var trackWidth = (0, _react.useMemo)(function () {
    return (0, _LoadingSpinnerIos.getTrackWidth)(safeSize, theme);
  }, [safeSize, theme]);
  var indicatorWidth = (0, _react.useMemo)(function () {
    return Math.max(1, Math.floor(trackWidth / 2));
  }, [trackWidth]);
  var progress = (0, _react.useRef)(new _reactNative.Animated.Value(0)).current;
  var translateX = (0, _react.useMemo)(function () {
    return progress.interpolate({
      inputRange: [0, 1],
      outputRange: [-indicatorWidth, trackWidth]
    });
  }, [progress, indicatorWidth, trackWidth]);
  (0, _react.useEffect)(function () {
    progress.setValue(0);
    var loop = _reactNative.Animated.loop(_reactNative.Animated.timing(progress, {
      toValue: 1,
      duration: 1200,
      easing: _reactNative.Easing.inOut(_reactNative.Easing.ease),
      useNativeDriver: true
    }));
    loop.start();
    return function () {
      loop.stop();
    };
  }, [progress]);
  return (0, _jsxRuntime.jsx)(_LoadingSpinnerIos.StyledContainer, Object.assign({
    style: style,
    testID: testID,
    accessibilityLabel: defaultAccessibilityLabel,
    accessibilityHint: accessibilityHint,
    accessibilityRole: "progressbar"
  }, rest, {
    children: (0, _jsxRuntime.jsx)(_LoadingSpinnerIos.StyledSpinner, {
      size: safeSize,
      children: (0, _jsxRuntime.jsx)(_LoadingSpinnerIos.StyledIndicator, {
        color: getColor(),
        indicatorWidth: indicatorWidth,
        translateX: translateX
      })
    })
  }));
};
var _default = exports.default = LoadingSpinnerIOS;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcmVhY3ROYXRpdmUiLCJfbmF0aXZlIiwiX0xvYWRpbmdTcGlubmVySW9zIiwiX2hvb2tzIiwiX3R5cGVzIiwiX2pzeFJ1bnRpbWUiLCJfZXhjbHVkZWQiLCJMb2FkaW5nU3Bpbm5lcklPUyIsIl9yZWYiLCJfcmVmJHNpemUiLCJzaXplIiwiU0laRVMiLCJNRURJVU0iLCJjb2xvciIsImFjY2Vzc2liaWxpdHlMYWJlbCIsImFjY2Vzc2liaWxpdHlIaW50IiwidGVzdElEIiwic3R5bGUiLCJyZXN0IiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiIsImRlZmF1bHQiLCJfdXNlSTE4biIsInVzZUkxOG4iLCJ0IiwidGhlbWUiLCJ1c2VUaGVtZSIsImRlZmF1bHRBY2Nlc3NpYmlsaXR5TGFiZWwiLCJzYWZlU2l6ZSIsInVzZU1lbW8iLCJhbGxvd2VkIiwiT2JqZWN0IiwidmFsdWVzIiwiaW5jbHVkZXMiLCJnZXRDb2xvciIsImNvbG9ycyIsInByaW1hcnkiLCJ0cmFja1dpZHRoIiwiZ2V0VHJhY2tXaWR0aCIsImluZGljYXRvcldpZHRoIiwiTWF0aCIsIm1heCIsImZsb29yIiwicHJvZ3Jlc3MiLCJ1c2VSZWYiLCJBbmltYXRlZCIsIlZhbHVlIiwiY3VycmVudCIsInRyYW5zbGF0ZVgiLCJpbnRlcnBvbGF0ZSIsImlucHV0UmFuZ2UiLCJvdXRwdXRSYW5nZSIsInVzZUVmZmVjdCIsInNldFZhbHVlIiwibG9vcCIsInRpbWluZyIsInRvVmFsdWUiLCJkdXJhdGlvbiIsImVhc2luZyIsIkVhc2luZyIsImluT3V0IiwiZWFzZSIsInVzZU5hdGl2ZURyaXZlciIsInN0YXJ0Iiwic3RvcCIsImpzeCIsIlN0eWxlZENvbnRhaW5lciIsImFzc2lnbiIsImFjY2Vzc2liaWxpdHlSb2xlIiwiY2hpbGRyZW4iLCJTdHlsZWRTcGlubmVyIiwiU3R5bGVkSW5kaWNhdG9yIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiTG9hZGluZ1NwaW5uZXIuaW9zLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTG9hZGluZ1NwaW5uZXIgQ29tcG9uZW50IC0gaU9TXHJcbiAqIExvYWRpbmcgaW5kaWNhdG9yIGNvbXBvbmVudCBmb3IgaU9TIHBsYXRmb3JtXHJcbiAqIEZpbGU6IExvYWRpbmdTcGlubmVyLmlvcy5qc3hcclxuICovXHJcblxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEFuaW1hdGVkLCBFYXNpbmcgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xyXG5pbXBvcnQgeyB1c2VUaGVtZSB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzL25hdGl2ZSc7XHJcbmltcG9ydCB7IFN0eWxlZENvbnRhaW5lciwgU3R5bGVkSW5kaWNhdG9yLCBTdHlsZWRTcGlubmVyLCBnZXRUcmFja1dpZHRoIH0gZnJvbSAnLi9Mb2FkaW5nU3Bpbm5lci5pb3Muc3R5bGVzJztcclxuaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gJ0Bob29rcyc7XHJcbmltcG9ydCB7IFNJWkVTIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vKipcclxuICogTG9hZGluZ1NwaW5uZXIgY29tcG9uZW50IGZvciBpT1NcclxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIC0gTG9hZGluZ1NwaW5uZXIgcHJvcHNcclxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLnNpemUgLSBTcGlubmVyIHNpemUgKHNtYWxsLCBtZWRpdW0sIGxhcmdlKVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcHMuY29sb3IgLSBTcGlubmVyIGNvbG9yIChvdmVycmlkZXMgdGhlbWUgZGVmYXVsdClcclxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLmFjY2Vzc2liaWxpdHlMYWJlbCAtIEFjY2Vzc2liaWxpdHkgbGFiZWxcclxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLmFjY2Vzc2liaWxpdHlIaW50IC0gQWNjZXNzaWJpbGl0eSBoaW50XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wcy50ZXN0SUQgLSBUZXN0IGlkZW50aWZpZXJcclxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzLnN0eWxlIC0gQWRkaXRpb25hbCBzdHlsZXNcclxuICovXHJcbmNvbnN0IExvYWRpbmdTcGlubmVySU9TID0gKHtcclxuICBzaXplID0gU0laRVMuTUVESVVNLFxyXG4gIGNvbG9yLFxyXG4gIGFjY2Vzc2liaWxpdHlMYWJlbCxcclxuICBhY2Nlc3NpYmlsaXR5SGludCxcclxuICB0ZXN0SUQsXHJcbiAgc3R5bGUsXHJcbiAgLi4ucmVzdFxyXG59KSA9PiB7XHJcbiAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XHJcbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xyXG4gIGNvbnN0IGRlZmF1bHRBY2Nlc3NpYmlsaXR5TGFiZWwgPSBhY2Nlc3NpYmlsaXR5TGFiZWwgfHwgdCgnY29tbW9uLmxvYWRpbmcnKTtcclxuICBcclxuICBjb25zdCBzYWZlU2l6ZSA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgY29uc3QgYWxsb3dlZCA9IE9iamVjdC52YWx1ZXMoU0laRVMpO1xyXG4gICAgcmV0dXJuIGFsbG93ZWQuaW5jbHVkZXMoc2l6ZSkgPyBzaXplIDogU0laRVMuTUVESVVNO1xyXG4gIH0sIFtzaXplXSk7XHJcblxyXG4gIGNvbnN0IGdldENvbG9yID0gKCkgPT4ge1xyXG4gICAgaWYgKGNvbG9yKSByZXR1cm4gY29sb3I7XHJcbiAgICAvLyBVc2UgdGhlbWUgcHJpbWFyeSBjb2xvciBhcyBkZWZhdWx0XHJcbiAgICByZXR1cm4gdGhlbWUuY29sb3JzLnByaW1hcnk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdHJhY2tXaWR0aCA9IHVzZU1lbW8oKCkgPT4gZ2V0VHJhY2tXaWR0aChzYWZlU2l6ZSwgdGhlbWUpLCBbc2FmZVNpemUsIHRoZW1lXSk7XHJcbiAgY29uc3QgaW5kaWNhdG9yV2lkdGggPSB1c2VNZW1vKCgpID0+IE1hdGgubWF4KDEsIE1hdGguZmxvb3IodHJhY2tXaWR0aCAvIDIpKSwgW3RyYWNrV2lkdGhdKTtcclxuICBjb25zdCBwcm9ncmVzcyA9IHVzZVJlZihuZXcgQW5pbWF0ZWQuVmFsdWUoMCkpLmN1cnJlbnQ7XHJcblxyXG4gIGNvbnN0IHRyYW5zbGF0ZVggPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBwcm9ncmVzcy5pbnRlcnBvbGF0ZSh7XHJcbiAgICAgIGlucHV0UmFuZ2U6IFswLCAxXSxcclxuICAgICAgb3V0cHV0UmFuZ2U6IFstaW5kaWNhdG9yV2lkdGgsIHRyYWNrV2lkdGhdLFxyXG4gICAgfSk7XHJcbiAgfSwgW3Byb2dyZXNzLCBpbmRpY2F0b3JXaWR0aCwgdHJhY2tXaWR0aF0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgcHJvZ3Jlc3Muc2V0VmFsdWUoMCk7XHJcbiAgICBjb25zdCBsb29wID0gQW5pbWF0ZWQubG9vcChcclxuICAgICAgQW5pbWF0ZWQudGltaW5nKHByb2dyZXNzLCB7XHJcbiAgICAgICAgdG9WYWx1ZTogMSxcclxuICAgICAgICBkdXJhdGlvbjogMTIwMCxcclxuICAgICAgICBlYXNpbmc6IEVhc2luZy5pbk91dChFYXNpbmcuZWFzZSksXHJcbiAgICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlLFxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICAgIGxvb3Auc3RhcnQoKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGxvb3Auc3RvcCgpO1xyXG4gICAgfTtcclxuICB9LCBbcHJvZ3Jlc3NdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxTdHlsZWRDb250YWluZXJcclxuICAgICAgc3R5bGU9e3N0eWxlfVxyXG4gICAgICB0ZXN0SUQ9e3Rlc3RJRH1cclxuICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsPXtkZWZhdWx0QWNjZXNzaWJpbGl0eUxhYmVsfVxyXG4gICAgICBhY2Nlc3NpYmlsaXR5SGludD17YWNjZXNzaWJpbGl0eUhpbnR9XHJcbiAgICAgIGFjY2Vzc2liaWxpdHlSb2xlPVwicHJvZ3Jlc3NiYXJcIlxyXG4gICAgICB7Li4ucmVzdH1cclxuICAgID5cclxuICAgICAgPFN0eWxlZFNwaW5uZXIgc2l6ZT17c2FmZVNpemV9PlxyXG4gICAgICAgIDxTdHlsZWRJbmRpY2F0b3IgY29sb3I9e2dldENvbG9yKCl9IGluZGljYXRvcldpZHRoPXtpbmRpY2F0b3JXaWR0aH0gdHJhbnNsYXRlWD17dHJhbnNsYXRlWH0gLz5cclxuICAgICAgPC9TdHlsZWRTcGlubmVyPlxyXG4gICAgPC9TdHlsZWRDb250YWluZXI+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvYWRpbmdTcGlubmVySU9TO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBTUEsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsa0JBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLE1BQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLE1BQUEsR0FBQUwsT0FBQTtBQUFnQyxJQUFBTSxXQUFBLEdBQUFOLE9BQUE7QUFBQSxJQUFBTyxTQUFBO0FBWWhDLElBQU1DLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBaUJBLENBQUFDLElBQUEsRUFRakI7RUFBQSxJQUFBQyxTQUFBLEdBQUFELElBQUEsQ0FQSkUsSUFBSTtJQUFKQSxJQUFJLEdBQUFELFNBQUEsY0FBR0UsWUFBSyxDQUFDQyxNQUFNLEdBQUFILFNBQUE7SUFDbkJJLEtBQUssR0FBQUwsSUFBQSxDQUFMSyxLQUFLO0lBQ0xDLGtCQUFrQixHQUFBTixJQUFBLENBQWxCTSxrQkFBa0I7SUFDbEJDLGlCQUFpQixHQUFBUCxJQUFBLENBQWpCTyxpQkFBaUI7SUFDakJDLE1BQU0sR0FBQVIsSUFBQSxDQUFOUSxNQUFN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