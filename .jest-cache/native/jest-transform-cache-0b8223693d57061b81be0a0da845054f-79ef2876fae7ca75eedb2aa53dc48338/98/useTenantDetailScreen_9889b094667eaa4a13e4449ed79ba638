5aaaa450861cffd3276c01bbecaf7159
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = require("react");
var _expoRouter = require("expo-router");
var _hooks = require("../../../../hooks");
var resolveErrorMessage = function resolveErrorMessage(t, errorCode) {
  if (!errorCode) return null;
  var key = `errors.codes.${errorCode}`;
  var resolved = t(key);
  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;
};
var useTenantDetailScreen = function useTenantDetailScreen() {
  var _useI18n = (0, _hooks.useI18n)(),
    t = _useI18n.t;
  var router = (0, _expoRouter.useRouter)();
  var _useLocalSearchParams = (0, _expoRouter.useLocalSearchParams)(),
    id = _useLocalSearchParams.id;
  var _useNetwork = (0, _hooks.useNetwork)(),
    isOffline = _useNetwork.isOffline;
  var _useTenant = (0, _hooks.useTenant)(),
    get = _useTenant.get,
    remove = _useTenant.remove,
    data = _useTenant.data,
    isLoading = _useTenant.isLoading,
    errorCode = _useTenant.errorCode,
    reset = _useTenant.reset;
  var tenant = data && typeof data === 'object' && !Array.isArray(data) ? data : null;
  var errorMessage = (0, _react.useMemo)(function () {
    return resolveErrorMessage(t, errorCode);
  }, [t, errorCode]);
  var fetchDetail = (0, _react.useCallback)(function () {
    if (!id) return;
    reset();
    get(id);
  }, [id, get, reset]);
  (0, _react.useEffect)(function () {
    fetchDetail();
  }, [fetchDetail]);
  var handleRetry = (0, _react.useCallback)(function () {
    fetchDetail();
  }, [fetchDetail]);
  var handleBack = (0, _react.useCallback)(function () {
    router.push('/settings/tenants');
  }, [router]);
  var handleDelete = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    if (!id) return;
    try {
      yield remove(id);
      handleBack();
    } catch (_unused) {}
  }), [id, remove, handleBack]);
  return {
    id: id,
    tenant: tenant,
    isLoading: isLoading,
    hasError: Boolean(errorCode),
    errorMessage: errorMessage,
    isOffline: isOffline,
    onRetry: handleRetry,
    onBack: handleBack,
    onDelete: handleDelete
  };
};
var _default = exports.default = useTenantDetailScreen;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2V4cG9Sb3V0ZXIiLCJfaG9va3MiLCJyZXNvbHZlRXJyb3JNZXNzYWdlIiwidCIsImVycm9yQ29kZSIsImtleSIsInJlc29sdmVkIiwidXNlVGVuYW50RGV0YWlsU2NyZWVuIiwiX3VzZUkxOG4iLCJ1c2VJMThuIiwicm91dGVyIiwidXNlUm91dGVyIiwiX3VzZUxvY2FsU2VhcmNoUGFyYW1zIiwidXNlTG9jYWxTZWFyY2hQYXJhbXMiLCJpZCIsIl91c2VOZXR3b3JrIiwidXNlTmV0d29yayIsImlzT2ZmbGluZSIsIl91c2VUZW5hbnQiLCJ1c2VUZW5hbnQiLCJnZXQiLCJyZW1vdmUiLCJkYXRhIiwiaXNMb2FkaW5nIiwicmVzZXQiLCJ0ZW5hbnQiLCJBcnJheSIsImlzQXJyYXkiLCJlcnJvck1lc3NhZ2UiLCJ1c2VNZW1vIiwiZmV0Y2hEZXRhaWwiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsImhhbmRsZVJldHJ5IiwiaGFuZGxlQmFjayIsInB1c2giLCJoYW5kbGVEZWxldGUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkZWZhdWx0IiwiX3VudXNlZCIsImhhc0Vycm9yIiwiQm9vbGVhbiIsIm9uUmV0cnkiLCJvbkJhY2siLCJvbkRlbGV0ZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZVRlbmFudERldGFpbFNjcmVlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogdXNlVGVuYW50RGV0YWlsU2NyZWVuIEhvb2tcclxuICogU2hhcmVkIGxvZ2ljIGZvciBUZW5hbnREZXRhaWxTY3JlZW4gYWNyb3NzIHBsYXRmb3Jtcy5cclxuICogRmlsZTogdXNlVGVuYW50RGV0YWlsU2NyZWVuLmpzXHJcbiAqL1xyXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIsIHVzZUxvY2FsU2VhcmNoUGFyYW1zIH0gZnJvbSAnZXhwby1yb3V0ZXInO1xyXG5pbXBvcnQgeyB1c2VJMThuLCB1c2VOZXR3b3JrLCB1c2VUZW5hbnQgfSBmcm9tICdAaG9va3MnO1xyXG5cclxuY29uc3QgcmVzb2x2ZUVycm9yTWVzc2FnZSA9ICh0LCBlcnJvckNvZGUpID0+IHtcclxuICBpZiAoIWVycm9yQ29kZSkgcmV0dXJuIG51bGw7XHJcbiAgY29uc3Qga2V5ID0gYGVycm9ycy5jb2Rlcy4ke2Vycm9yQ29kZX1gO1xyXG4gIGNvbnN0IHJlc29sdmVkID0gdChrZXkpO1xyXG4gIHJldHVybiByZXNvbHZlZCA9PT0ga2V5ID8gdCgnZXJyb3JzLmNvZGVzLlVOS05PV05fRVJST1InKSA6IHJlc29sdmVkO1xyXG59O1xyXG5cclxuY29uc3QgdXNlVGVuYW50RGV0YWlsU2NyZWVuID0gKCkgPT4ge1xyXG4gIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xyXG4gIGNvbnN0IHsgaWQgfSA9IHVzZUxvY2FsU2VhcmNoUGFyYW1zKCk7XHJcbiAgY29uc3QgeyBpc09mZmxpbmUgfSA9IHVzZU5ldHdvcmsoKTtcclxuICBjb25zdCB7IGdldCwgcmVtb3ZlLCBkYXRhLCBpc0xvYWRpbmcsIGVycm9yQ29kZSwgcmVzZXQgfSA9IHVzZVRlbmFudCgpO1xyXG5cclxuICBjb25zdCB0ZW5hbnQgPSBkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBudWxsO1xyXG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiByZXNvbHZlRXJyb3JNZXNzYWdlKHQsIGVycm9yQ29kZSksXHJcbiAgICBbdCwgZXJyb3JDb2RlXVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGZldGNoRGV0YWlsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKCFpZCkgcmV0dXJuO1xyXG4gICAgcmVzZXQoKTtcclxuICAgIGdldChpZCk7XHJcbiAgfSwgW2lkLCBnZXQsIHJlc2V0XSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBmZXRjaERldGFpbCgpO1xyXG4gIH0sIFtmZXRjaERldGFpbF0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXRyeSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGZldGNoRGV0YWlsKCk7XHJcbiAgfSwgW2ZldGNoRGV0YWlsXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUJhY2sgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICByb3V0ZXIucHVzaCgnL3NldHRpbmdzL3RlbmFudHMnKTtcclxuICB9LCBbcm91dGVyXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZURlbGV0ZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghaWQpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHJlbW92ZShpZCk7XHJcbiAgICAgIGhhbmRsZUJhY2soKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvKiBlcnJvciBoYW5kbGVkIGJ5IGhvb2sgKi9cclxuICAgIH1cclxuICB9LCBbaWQsIHJlbW92ZSwgaGFuZGxlQmFja10pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaWQsXHJcbiAgICB0ZW5hbnQsXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBoYXNFcnJvcjogQm9vbGVhbihlcnJvckNvZGUpLFxyXG4gICAgZXJyb3JNZXNzYWdlLFxyXG4gICAgaXNPZmZsaW5lLFxyXG4gICAgb25SZXRyeTogaGFuZGxlUmV0cnksXHJcbiAgICBvbkJhY2s6IGhhbmRsZUJhY2ssXHJcbiAgICBvbkRlbGV0ZTogaGFuZGxlRGVsZXRlLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VUZW5hbnREZXRhaWxTY3JlZW47XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFB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