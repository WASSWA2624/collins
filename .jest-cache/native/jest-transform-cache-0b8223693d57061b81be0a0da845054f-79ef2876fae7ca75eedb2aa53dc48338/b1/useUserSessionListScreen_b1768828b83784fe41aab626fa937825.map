{"version":3,"names":["_react","require","_expoRouter","_hooks","resolveErrorMessage","t","errorCode","key","resolved","useUserSessionListScreen","_useI18n","useI18n","router","useRouter","_useNetwork","useNetwork","isOffline","_useUserSession","useUserSession","list","revoke","data","isLoading","reset","items","useMemo","_data$items","errorMessage","fetchList","useCallback","page","limit","useEffect","handleRetry","handleSessionPress","id","push","handleRevoke","_ref","_asyncToGenerator2","default","e","stopPropagation","_unused","_x","_x2","apply","arguments","hasError","Boolean","onRetry","onSessionPress","onRevoke","_default","exports"],"sources":["useUserSessionListScreen.js"],"sourcesContent":["/**\r\n * useUserSessionListScreen Hook\r\n * Shared logic for UserSessionListScreen across platforms.\r\n * File: useUserSessionListScreen.js\r\n */\r\nimport { useCallback, useEffect, useMemo } from 'react';\r\nimport { useRouter } from 'expo-router';\r\nimport { useI18n, useNetwork, useUserSession } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode) => {\r\n  if (!errorCode) return null;\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\r\n};\r\n\r\nconst useUserSessionListScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { isOffline } = useNetwork();\r\n  const {\r\n    list,\r\n    revoke,\r\n    data,\r\n    isLoading,\r\n    errorCode,\r\n    reset,\r\n  } = useUserSession();\r\n\r\n  const items = useMemo(() => data?.items ?? [], [data?.items]);\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode),\r\n    [t, errorCode]\r\n  );\r\n\r\n  const fetchList = useCallback(() => {\r\n    reset();\r\n    list({ page: 1, limit: 20 });\r\n  }, [list, reset]);\r\n\r\n  useEffect(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const handleSessionPress = useCallback(\r\n    (id) => {\r\n      router.push(`/settings/user-sessions/${id}`);\r\n    },\r\n    [router]\r\n  );\r\n\r\n  const handleRevoke = useCallback(\r\n    async (id, e) => {\r\n      if (e?.stopPropagation) e.stopPropagation();\r\n      try {\r\n        await revoke(id);\r\n        fetchList();\r\n      } catch {\r\n        /* error handled by hook */\r\n      }\r\n    },\r\n    [revoke, fetchList]\r\n  );\r\n\r\n  return {\r\n    items,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    errorMessage,\r\n    isOffline,\r\n    onRetry: handleRetry,\r\n    onSessionPress: handleSessionPress,\r\n    onRevoke: handleRevoke,\r\n  };\r\n};\r\n\r\nexport default useUserSessionListScreen;\r\n"],"mappings":"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","ignoreList":[]}