{"version":3,"names":["useCallback","useEffect","useMemo","useRouter","useI18n","useNetwork","useApiKeyPermission","cov_1ilxvpscb2","s","resolveErrorMessage","t","errorCode","f","b","key","resolved","useApiKeyPermissionListScreen","_ref","router","_ref2","isOffline","_ref3","list","remove","data","isLoading","reset","items","_ref4","errorMessage","fetchList","page","limit","handleRetry","handleItemPress","id","push","handleDelete","_ref5","_asyncToGenerator","e","stopPropagation","confirm","_x","_x2","apply","arguments","hasError","onRetry","onItemPress","onDelete"],"sources":["useApiKeyPermissionListScreen.js"],"sourcesContent":["/**\n * useApiKeyPermissionListScreen Hook\n * Shared logic for ApiKeyPermissionListScreen across platforms.\n * File: useApiKeyPermissionListScreen.js\n */\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { useRouter } from 'expo-router';\nimport { useI18n, useNetwork, useApiKeyPermission } from '@hooks';\n\nconst resolveErrorMessage = (t, errorCode) => {\n  if (!errorCode) return null;\n  const key = `errors.codes.${errorCode}`;\n  const resolved = t(key);\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\n};\n\nconst useApiKeyPermissionListScreen = () => {\n  const { t } = useI18n();\n  const router = useRouter();\n  const { isOffline } = useNetwork();\n  const {\n    list,\n    remove,\n    data,\n    isLoading,\n    errorCode,\n    reset,\n  } = useApiKeyPermission();\n\n  const items = useMemo(() => data?.items ?? [], [data?.items]);\n  const errorMessage = useMemo(\n    () => resolveErrorMessage(t, errorCode),\n    [t, errorCode]\n  );\n\n  const fetchList = useCallback(() => {\n    reset();\n    list({ page: 1, limit: 20 });\n  }, [list, reset]);\n\n  useEffect(() => {\n    fetchList();\n  }, [fetchList]);\n\n  const handleRetry = useCallback(() => {\n    fetchList();\n  }, [fetchList]);\n\n  const handleItemPress = useCallback(\n    (id) => {\n      router.push(`/settings/pi-key-permissions/${id}`);\n    },\n    [router]\n  );\n\n  const handleDelete = useCallback(\n    async (id, e) => {\n      if (e) e.stopPropagation();\n      if (confirm(t('common.confirmDelete'))) {\n        await remove(id);\n      }\n    },\n    [remove, t]\n  );\n\n  return {\n    items,\n    isLoading,\n    hasError: !!errorCode,\n    errorMessage,\n    isOffline,\n    onRetry: handleRetry,\n    onItemPress: handleItemPress,\n    onDelete: handleDelete,\n  };\n};\n\nexport default useApiKeyPermissionListScreen;\n"],"mappings":"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","ignoreList":[]}